function u(t){return new Promise((n,e)=>{t.oncomplete=t.onsuccess=()=>n(t.result),t.onabort=t.onerror=()=>e(t.error)})}function l(t,n){let e;const o=()=>{if(e)return e;const r=indexedDB.open(t);return r.onupgradeneeded=()=>r.result.createObjectStore(n),e=u(r),e.then(c=>{c.onclose=()=>e=void 0},()=>{}),e};return(r,c)=>o().then(d=>c(d.transaction(n,r).objectStore(n)))}let a;function i(){return a||(a=l("keyval-store","keyval")),a}function f(t,n=i()){return n("readonly",e=>u(e.get(t)))}function s(t,n,e=i()){return e("readwrite",o=>(o.put(n,t),u(o.transaction)))}function p(t,n=i()){return n("readwrite",e=>(e.delete(t),u(e.transaction)))}export{p as d,f as g,s};
